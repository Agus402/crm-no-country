spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3309/crm-nocountry?createDatabaseIfNotExist=true&useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true}

spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:tgw3R48m!vP}

spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=1
spring.flyway.validate-on-migrate=true

jwt.secret-key=${JWT_SECRET_KEY:626306b2a19cd2db4e4e4892a4e5bfc6a80aa975753c999797d369e977f13b07}

spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000}
app.cookie.secure=${APP_COOKIE_SECURE:false}

# WhatsApp API Configuration
# Configure via environment variables: WHATSAPP_API_BASE_URL, WHATSAPP_API_TOKEN, WHATSAPP_VERIFY_TOKEN
# Note: Spring Boot automatically overrides these with environment variables if they exist
WHATSAPP_API_BASE_URL=https://graph.facebook.com/v19.0
WHATSAPP_API_TOKEN=
WHATSAPP_VERIFY_TOKEN=${WHATSAPP_VERIFY_TOKEN:}

# Email Configuration (SMTP/IMAP)
# These are defaults - actual credentials come from database (IntegrationConfig) or environment variables
# Spring Boot mail auto-configuration requires these properties to create JavaMailSender bean
spring.mail.host=${MAIL_SMTP_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_SMTP_PORT:587}
spring.mail.username=${MAIL_SMTP_USERNAME:}
spring.mail.password=${MAIL_SMTP_PASSWORD:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# IMAP Configuration (for EmailInboundService)
# These are fallback values - actual credentials come from database (IntegrationConfig) or environment variables
mail.imap.host=${MAIL_IMAP_HOST:imap.gmail.com}
mail.imap.port=${MAIL_IMAP_PORT:993}
mail.imap.username=${MAIL_IMAP_USERNAME:}
mail.imap.password=${MAIL_IMAP_PASSWORD:}
mail.imap.folder=${MAIL_IMAP_FOLDER:INBOX}